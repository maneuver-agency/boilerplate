define(["async"],function(o){function e(){}var t=this,r={load:function(o,e,t,r){var a,i=r||{};return i.isBuild?void t(null):(a=new s(e,t,i.googlemaps||{}),void a.load())}},s=function(t,r,a){this.require_=t,this.onload_=r||e,this.baseUrl_=a.url||s.DEFAULT_BASE_URL,this.async_=a.async||o,this.params_=this.normalizeParams_(a.params)};return s.prototype.load=function(){this.isGoogleMapsLoaded_()?this.resolveWith_(this.getGlobalGoogleMaps_()):this.loadGoogleMaps_()},s.prototype.loadGoogleMaps_=function(){var o=this,e=function(){o.resolveWithGoogleMaps_(o)};e.onerror=this.onload_.onerror,this.async_.load(this.getGoogleUrl_(),this.require_,e,{})},s.prototype.getGoogleUrl_=function(){return this.baseUrl_+"?"+this.serializeParams_()},s.prototype.resolveWithGoogleMaps_=function(){return this.isGoogleMapsLoaded_()?void this.resolveWith_(this.getGlobalGoogleMaps_()):void this.reject_()},s.prototype.serializeParams_=function(){var o=[];for(var e in this.params_)if(this.params_.hasOwnProperty(e)){var t=this.params_[e],r="object"==typeof t,s=encodeURIComponent(e)+"="+encodeURIComponent(t),a=r?this.serializeParams_(t,e):s;o.push(a)}return o.join("&")},s.prototype.normalizeParams_=function(o){var e={sensor:!1};return o||(o={}),o.sensor=void 0==o.sensor?e.sensor:o.sensor,o},s.prototype.isGoogleMapsLoaded_=function(){return t.google&&t.google.maps},s.prototype.getGlobalGoogleMaps_=function(){return t.google?t.google.maps:void 0},s.prototype.resolveWith_=function(o){this.onload_.apply(t,arguments)},s.prototype.reject_=function(o){var e=o||new Error("Failed to load Google Maps library.");if(!this.onload_.onerror)throw e;this.onload_.onerror.call(t,e)},s.DEFAULT_BASE_URL="https://maps.googleapis.com/maps/api/js",r});